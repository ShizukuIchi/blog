{"data":{"site":{"siteMetadata":{"title":"網頁小筆記","author":"Shizuku"}},"markdownRemark":{"id":"528bc8e3-88bf-5c1b-b946-afeadd9dc441","excerpt":"近年來前端開發框架漸漸從 JQuery 變為 Angular、Vue、React，JQuery 為何被取代呢？ Why React？ 有別於 JQuery 將邏輯和介面寫在一塊命令式語法，React…","html":"<p>近年來前端開發框架漸漸從 JQuery 變為 Angular、Vue、React，JQuery 為何被取代呢？</p>\n<h2>Why React？</h2>\n<p>有別於 JQuery 將邏輯和介面寫在一塊命令式語法，React 是宣告式，將畫面呈現 (排版) 和 資料 (狀態) 分開，先定義好介面如何呈現，再將資料灌進去，每當資料改變就進行畫面重繪。</p>\n<p>假設有幾個按鈕，可以改變文字的樣式：</p>\n<style>\n  label.demo {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n  }\n  button.demo {\n    padding: 0;\n    margin: 10px;\n    width: 100px;\n    height: 50px;\n    line-height: 50px;\n    color: #FFF;\n    outline: none;\n    border: 0;\n    background-color: #2196F3;\n    border-radius: 5px;\n    box-shadow: 1px 2px 2px 1px #0D47A1;\n    transition: .0.05s, transform 0.02s;\n  }\n  button.demo:active {\n    transform: translate(2px, 2px);\n    box-shadow: inset 1px 1px 3px #2196F3;\n    background-color:#1976D2;\n  }\n  .buttons.demo {\n    display: flex;\n    justify-content: center;\n  }\n  input.demo {\n    display: none;\n  }\n  span.demo {\n    font-size: 60px;\n    padding: 10px;\n  }\n  .text.demo {\n    text-align: center;\n    color:#0D47A1;\n  }\n  #bold:checked ~ .text span {\n    font-weight: bold;\n  }\n  #italic:checked ~ .text span {\n    font-style: italic;\n  }\n  #underline:checked ~ .text span {\n    text-decoration: underline;\n  }\n</style>\n<div class=\"buttons demo\">\n  <button class=\"demo\">\n    <label class=\"demo\" for=\"bold\">Bold</label>\n  </button>\n  <button class=\"demo\">\n    <label class=\"demo\" for=\"italic\">Italic</label>\n  </button>\n  <button class=\"demo\">\n    <label class=\"demo\" for=\"underline\">Underline</label>\n  </button>\n</div>\n<input class=\"demo\" type=\"checkbox\" name=\"bold\" id=\"bold\">\n<input class=\"demo\" type=\"checkbox\" name=\"italic\" id=\"italic\">\n<input class=\"demo\" type=\"checkbox\" name=\"underline\" id=\"underline\">\n<div class=\"text demo\">　<span class=\"demo\">Hello World</span>　</div>\n<p>要達成如上效果，通常會有三個變數分別代表粗體、斜體、底線，儲存著文字樣式的狀態，決定按下按鈕時該怎麼改變文字樣式。</p>\n<ul>\n<li>\n<p>JQuery 思路：</p>\n<p>按下按鈕時，切換對應變數的狀態，並把新的狀態覆寫到文字的樣式，或是切換文字的 class，程式碼大概像：</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"button#bold\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toggleClass</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bold\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p>React 思路：</p>\n<p>預先定義好文字在各種狀態下該如何繪圖，按下按鈕時修改<strong>狀態</strong>，React 會自動在狀態改變時進行畫面重繪，由於如何繪圖已經定義好了，新的狀態就會產生新的畫面。</p>\n</li>\n</ul>\n<p>好處是 JQuery 必須直接修改網頁樣式(命令式)，React 則是完全把邏輯和視圖分開，透過定義好繪圖方式，修改狀態來重繪畫面(宣告式)，大大降低了 debug 的成本。</p>\n<h2>React 語法</h2>\n<p>我想在網頁上放個 Hello World …</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>Hello World!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>轉換成 React</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Hello World<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>我們完成了第一個 React component！是不是很簡單呢？</p>\n<p>真的很簡單 (誤</p>\n<p>那要怎麼放進 DOM 裡面呢？ 首先要有個進入點如下圖的 <code class=\"language-text\">div#root</code>。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- index.html --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>並把寫好的 React component 如剛剛的 <code class=\"language-text\">Hello</code> 塞進這個 div，具體步驟為執行 ReactDOM.render 並放入兩個參數 ( 根元件 &#x26; 進入點 )：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>MyDiv <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>可以注意到 MyDiv 直接使用 Html tag 的語法，其實上方宣告 MyDiv 時裡面也是直接用了 div，這是 React 使用元件的縮寫語法 (JSX)。</p>\n<p>※ React 是以開頭大小寫分辨是否為 Html 既有元件，亂用會直接報錯！</p>\n<p>// Bad\n<myDiv />\n// Good\n<MyDiv /></p>\n<div />\n狀態控制\nReact 的特性：真相只有一個！永遠依據當前 state 執行 render。\n<p>以 setState 改變元件的 state，每當 state 更動時就會觸發 render 重繪。</p>\n<p>class App extends React.Component {\nstate = {\nvalue: ‘Hello World!’,\n};\nchangeState = () => {\nthis.setState({ value: ‘Hello React!’ });\n}\nrender() {\nreturn (</p>\n<div onClick={this.changeState}>{this.state.value}</div>\n);\n}\n}\n// Hello World!\n// click div\n// Hello React!\n※ 請勿直接執行 this.state.value = 'Hello React!';\n<p>資料傳遞\n元件內的狀態叫做 state，來自 parent 的資料叫做 props，傳入新的 props 也會讓 component 重繪。</p>\n<p>class App extends React.Component {\nstate = {\nvalue: ‘Hello World!’,\n};\nchangeState = () => {\nthis.setState({ value: ‘Hello React!’ });\n}\nrender() {\nreturn (</p>\n<div onClick={this.changeState}>\n<HelloText text={this.state.value} />\n</div>\n);\n}\n}\nconst HelloText = (props) => {\nreturn (  \n <div className=\"hello\">{`Hello ${props.text}`}</div>\n);\n}\n// Hello Hello World!\n// click div\n// Hello Hello React!\n※ JSX 語法有幾點要注意：\n<p>Javascript 保留字：\n<label htmlFor=\"username\" className=\"user-name\" /></p>\n<p>inline style 是物件 ( 非必要別寫 inline style )：</p>\n<div style={{ backgroundColor: \"#FFF\", height: \"100px\" }} ></div>\n<p>JSX 裡面的 JS 要包上 {} ：\n<span>{‘I am ’ + x + ’ years old.‘}</span>\n延伸閱讀：Virtual DOM、Component Lifecycle</p>","frontmatter":{"title":"React 快速上手","date":"March 12, 2019","description":"打破成見，React 一點都不難","difficulty":"中階"}}},"pageContext":{"slug":"/react/","previous":{"fields":{"slug":"/js-dev-env/"},"frontmatter":{"title":"Javascript 開發環境簡介"}},"next":null}}